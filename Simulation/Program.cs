using System;
using System.Collections.Generic;
using System.Data.Entity.Migrations;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using DataAccess;
using Simulation.Simulations;

namespace Simulation
{
    public class Program
    {
        public void KDJ_Sim()
        {
            var stockPool = new List<string>()
            {
                "600000","600004","600009","600012","600015","600016","600019","600020","600022","600023","600026","600028","600029","600030","600031","600033","600035","600036","600037","600048","600056","600057","600059","600060","600061","600062","600064","600067","600068","600070","600073","600075","600076","600081","600086","600089","600090","600093","600094","600104","600106","600115","600120","600121","600123","600126","600133","600153","600162","600163","600167","600168","600170","600172","600176","600177","600180","600183","600185","600188","600195","600196","600197","600201","600208","600210","600218","600219","600221","600225","600229","600230","600231","600236","600240","600243","600251","600252","600261","600269","600270","600271","600273","600282","600284","600285","600291","600295","600297","600298","600299","600300","600303","600306","600307","600308","600309","600322","600323","600325","600327","600328","600329","600332","600335","600338","600340","600345","600346","600348","600350","600352","600354","600356","600362","600368","600373","600377","600380","600382","600383","600390","600393","600395","600398","600403","600409","600415","600418","600420","600422","600423","600426","600438","600461","600475","600480","600483","600486","600491","600497","600499","600500","600507","600508","600509","600510","600518","600519","600522","600528","600529","600548","600551","600557","600566","600567","600572","600581","600585","600596","600597","600598","600600","600603","600606","600611","600612","600616","600617","600622","600623","600628","600633","600639","600641","600642","600649","600655","600660","600668","600674","600676","600684","600688","600689","600690","600694","600697","600703","600704","600705","600711","600713","600717","600719","600723","600726","600729","600736","600737","600739","600741","600742","600745","600746","600748","600750","600755","600757","600758","600761","600782","600785","600790","600795","600803","600808","600809","600810","600816","600820","600823","600827","600828","600829","600835","600837","600843","600850","600856","600858","600859","600873","600877","600883","600886","600887","600891","600894","600895","600897","600908","600919","600926","600958","600960","600966","600970","600971","600978","600979","600981","600982","600983","600987","600993","600995","600997","600999","601000","601003","601006","601009","601010","601012","601018","601021","601088","601098","601101","601107","601111","601117","601127","601128","601139","601158","601166","601169","601179","601186","601188","601208","601211","601216","601222","601225","601229","601231","601233","601238","601288","601318","601328","601333","601336","601339","601366","601368","601377","601388","601390","601398","601515","601518","601555","601566","601579","601588","601607","601618","601633","601636","601666","601668","601669","601677","601678","601688","601699","601788","601789","601800","601801","601811","601818","601872","601877","601881","601888","601898","601899","601900","601918","601928","601933","601939","601952","601966","601985","601988","601991","601997","601998","000001","000006","000011","000012","000021","000030","000031","000036","000038","000039","000046","000059","000060","000063","000069","000090","000100","000166","000333","000338","000402","000404","000415","000417","000418","000421","000422","000423","000429","000488","000501","000513","000517","000521","000525","000528","000531","000540","000541","000545","000550","000552","000568","000570","000581","000589","000596","000598","000600","000601","000609","000617","000623","000625","000626","000635","000637","000650","000651","000665","000666","000667","000669","000671","000672","000683","000685","000688","000692","000698","000700","000703","000707","000708","000709","000717","000719","000723","000725","000726","000732","000733","000735","000750","000759","000761","000776","000778","000783","000800","000811","000822","000825","000828","000830","000848","000858","000860","000863","000869","000876","000883","000886","000887","000895","000898","000899","000900","000902","000903","000906","000915","000921","000926","000928","000932","000933","000937","000951","000959","000963","000965","000966","000983","000990","000997","000999","001696","001979","002001","002002","002004","002014","002019","002020","002026","002027","002029","002032","002042","002048","002051","002061","002062","002064","002065","002067","002068","002078","002080","002081","002083","002091","002092","002097","002099","002100","002108","002109","002110","002116","002126","002128","002136","002142","002145","002146","002152","002157","002171","002172","002182","002183","002187","002191","002195","002203","002206","002207","002208","002215","002221","002233","002242","002244","002251","002258","002267","002274","002277","002293","002294","002304","002317","002320","002324","002326","002327","002345","002354","002357","002367","002382","002394","002403","002408","002419","002429","002434","002440","002441","002448","002454","002468","002470","002479","002489","002493","002496","002502","002516","002532","002534","002536","002540","002543","002550","002557","002561","002562","002563","002582","002588","002589","002595","002597","002601","002603","002608","002636","002646","002648","002650","002656","002701","002714","002726","002727","002734","002736"
            };
            new KDJ_Simu(100000, 25000, stockPool).Simulate(new DateTime(2016, 4, 13), new DateTime(2017, 4, 13));
        }

        public static void Main(string[] args)
        {
            new Program().KDJ_Sim();
            //new KDJ_Simu("000837", new DateTime(2008, 6, 20), new DateTime(2017, 3, 13));
            //new KDJ_Simu("002230", new DateTime(2015, 4, 29), new DateTime(2017, 3, 16));
            // new KDJ_Simu("600730", new DateTime(2016, 1, 19), new DateTime(2017, 3, 13));

            //List<string> stockCode = new List<string>
            //{
            //    "600017" //, "002230", "600730", "600115", "000402", "600630", "600585", "600271", "600017", "000561"
            //};
            //new Simulation3(100000, stockCode, new DateTime(2010, 12, 1), new DateTime(2017, 3, 13)).RunSimulation();

            //using (var dbContext = new StockTrackerEntities())
            //{
            //    dbContext.Configuration.AutoDetectChangesEnabled = false;
            //    var tradingDates = dbContext.stock_trading_date.ToList();
            //    foreach (var stockTradingDate in tradingDates)
            //    {
            //        var historyList = dbContext.stock_history.Where(sh => sh.stock_day == stockTradingDate.trading_date).ToList();
            //        historyList.ForEach(hl =>
            //        {
            //            hl.trading_date = stockTradingDate.id;
            //            dbContext.stock_history.AddOrUpdate(hl);
            //            dbContext.Entry(hl).State = System.Data.EntityState.Modified;
            //        });
            //        dbContext.SaveChanges();
            //        Console.WriteLine($"{stockTradingDate.trading_date} done");
            //    }
            //}

            Console.WriteLine("Program Completed.");
            Console.Read();
        }
    }
}
